<!-- templates/test_results.html -->
{% extends "base.html" %}

{% block content %}
<div class="container">
    <div class="section">
        <h2 class="section-title">Artifact Generation Results</h2>
        <p><a href="{{ url_for('test_form') }}">&larr; Back to test form</a></p>

        <div style="margin-top: 1rem;">
            <h3>Input Content</h3>
            <pre style="white-space: pre-wrap; background-color: #f5f5f5; padding: 1rem; overflow-x: auto;">{{ content[:500] }}{% if content|length > 500 %}...{% endif %}</pre>
        </div>

        <div style="margin-top: 2rem;">
            <h3>Project Description</h3>

            <div class="tech-section">
                <div class="tech-label">Core Summary:</div>
                <ol>
                    {% for sentence in description.three_sentences %}
                        <li>{{ sentence }}</li>
                    {% endfor %}
                </ol>
            </div>

            <div class="tech-section">
                <div class="tech-label">Detailed Description:</div>
                {% for paragraph in description.three_paragraphs %}
                    <p>{{ paragraph }}</p>
                {% endfor %}
            </div>

            {% if description.objections %}
                <h4>Critical Objections</h4>
                <ul class="objections">
                    {% for objection in description.objections %}
                        <li>
                            <strong>{{ objection.title }}</strong>
                            <p>{{ objection.explanation }}</p>
                            {% if objection.impact %}
                            <span class="impact">Impact: {{ objection.impact }}</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <div style="margin-top: 2rem;">
            <h3>Internal Messaging</h3>

            <div class="tech-section">
                <div class="tech-label">Subject:</div>
                <p class="tech-content">{{ internal.subject }}</p>
            </div>

            {% if internal.what_it_is %}
                <div class="tech-section">
                    <div class="tech-label">What It Is:</div>
                    <p class="tech-content">{{ internal.what_it_is }}</p>
                </div>

                <div class="tech-section">
                    <div class="tech-label">Customer Pain:</div>
                    <p class="tech-content">{{ internal.customer_pain }}</p>
                </div>

                <div class="tech-section">
                    <div class="tech-label">Our Solution:</div>
                    <p class="tech-content">{{ internal.our_solution }}</p>
                </div>

                <div class="tech-section">
                    <div class="tech-label">Business Impact:</div>
                    <p class="tech-content">{{ internal.business_impact }}</p>
                </div>

                {% if internal.timeline %}
                <div class="tech-section">
                    <div class="tech-label">Timeline:</div>
                    <p class="tech-content">{{ internal.timeline }}</p>
                </div>
                {% endif %}

                {% if internal.team_needs %}
                <div class="tech-section">
                    <div class="tech-label">Team Needs:</div>
                    <p class="tech-content">{{ internal.team_needs }}</p>
                </div>
                {% endif %}
            {% elif internal.what_changed %}
                <div class="tech-section">
                    <div class="tech-label">What Changed:</div>
                    <p class="tech-content">{{ internal.what_changed }}</p>
                </div>

                <div class="tech-section">
                    <div class="tech-label">Customer Impact:</div>
                    <p class="tech-content">{{ internal.customer_impact }}</p>
                </div>

                <div class="tech-section">
                    <div class="tech-label">Business Impact:</div>
                    <p class="tech-content">{{ internal.business_impact }}</p>
                </div>

                {% if internal.timeline_impact %}
                <div class="tech-section">
                    <div class="tech-label">Timeline Impact:</div>
                    <p class="tech-content">{{ internal.timeline_impact }}</p>
                </div>
                {% endif %}

                {% if internal.team_needs %}
                <div class="tech-section">
                    <div class="tech-label">Team Needs:</div>
                    <p class="tech-content">{{ internal.team_needs }}</p>
                </div>
                {% endif %}
            {% endif %}

            {% if internal.objections %}
                <h4>Critical Objections</h4>
                <ul class="objections">
                    {% for objection in internal.objections %}
                        <li>
                            <strong>{{ objection.title }}</strong>
                            <p>{{ objection.explanation }}</p>
                            {% if objection.impact %}
                            <span class="impact">Impact: {{ objection.impact }}</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>

        <div style="margin-top: 2rem;">
            <h3>External Messaging</h3>

            <div class="tech-section">
                <div class="tech-label">Headline:</div>
                <p class="tech-content"><strong>{{ external.headline }}</strong></p>
            </div>

            <div class="tech-section">
                <div class="tech-label">Pain Point:</div>
                <p class="tech-content">{{ external.pain_point }}</p>
            </div>

            <div class="tech-section">
                <div class="tech-label">Solution:</div>
                <p class="tech-content">{{ external.solution }}</p>
            </div>

            {% if external.benefits %}
            <div class="tech-section">
                <div class="tech-label">Benefits:</div>
                <p class="tech-content">{{ external.benefits }}</p>
            </div>
            {% endif %}

            <div class="tech-section">
                <div class="tech-label">Call to Action:</div>
                <p class="tech-content">{{ external.call_to_action }}</p>
            </div>

            {% if external.objections %}
                <h4>Critical Objections</h4>
                <ul class="objections">
                    {% for objection in external.objections %}
                        <li>
                            <strong>{{ objection.title }}</strong>
                            <p>{{ objection.explanation }}</p>
                            {% if objection.impact %}
                            <span class="impact">Impact: {{ objection.impact }}</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>
</div>
{% endblock %}